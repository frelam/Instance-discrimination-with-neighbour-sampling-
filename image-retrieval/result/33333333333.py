import os
import glob
import numpy as np

# queryDir = '/home/omnisky/image-retrieval/query/1-4.jpg'
#
# f1 = '/home/omnisky/shu_wujiandu/queryset/'
#label = int(os.path.split(queryDir)[-1].split('-')[1].split('.jpg')[0])
# path1 = os.path.join(f1,str(label))
# print(path1)
# #
# print (path1+'/*.jpg')
# # file_number = glob.glob(path1+'/*.jpg')
# # print (len(file_number))

# im = 'deneme.jpg'
# print(im)
# img = im.split('-')[1]
# print(img)
# print(str(label)+'.jpg')
# if img == str(label)+'.jpg':
#     print (1)
# queryNumeber = []
# for i in range(1,36):
#     queryset = '/home/omnisky/shu_wujiandu/queryset/' + str(i)
#
#     file = glob.glob(queryset + '/*.jpg')
#     queryNumeber.append(len(file))
# print(queryNumeber)
# query_path = '/media/omnisky/59784c4c-dc3f-498a-92ba-e9df5f0d313f/shangbiao_32x32'
# l = os.listdir(query_path)
# print(len(l))

i = '/media/omnisky/683cd494-d120-4dbd-81a4-eb3a90330106/shangbiao1_32x32(wu)'
b = '/media/omnisky/683cd494-d120-4dbd-81a4-eb3a90330106/shangbiao_32x32'
j = os.listdir(i)
q = os.listdir(b)
print(len(q)*4)

print(len(j))

# yixia shi  featureCNN1.h5 jieguo
# minNumber= [1, 12, 11, 7, 4, 2, 2, 1, 10, 8, 6, 6, 9, 10, 13, 8, 5, 10, 2, 1, 1, 5, 2, 8, 6, 14, 1, 8, 9, 7, 10, 9, 8, 4, 4]
# best_min= 1
# rank= [0.08394646909694947, 0.14684908741721864, 0.10013280338609062, 0.2364684027977084, 0.06925454571053227, 0.05279030171404945, 0.16213844692600693, 0.08374835953536393, 0.13940539972686206, 0.0635218379783509, 0.05758772441251217, 0.12721891248181044, 0.274679555099724, 0.062356616614351816, 0.036520972829581874, 0.2894446231429346, 0.17984207718791723, 0.1294057571238424, 0.007927298289601356, 0.13269359273855977, 0.09481480157788962, 0.07776351799927005, 0.09061481546462752, 0.06294942301063536, 0.08167591987905783, 0.17723124642655086, 0.09569448550899648, 0.07709594376087758, 0.0048780257272659335, 0.13657188315468066, 0.12450346187711393, 0.24552522735321547, 0.09823519296488714, 0.05005073954099398, 0.11013339571535172]
# average_rank = 0.11324773897632523
# rangk = np.argsort(rank)
# print(rangk)
# print(rank[15])

count = 2265830
rank = 0.24538822517742595
j_min= 0.11013339571535172
minNumber= [1, 12, 11, 7, 4, 2, 2, 1, 10, 8, 6, 6, 9, 10, 13, 8, 5, 10, 2, 1, 1, 5, 2, 8, 6, 14, 1, 8, 9, 7, 10, 9, 8, 4, 4]
best_min= 1
rank= [0.08394646909694947, 0.14684908741721864, 0.10013280338609062, 0.2364684027977084, 0.06925454571053227, 0.05279030171404945, 0.16213844692600693, 0.08374835953536393, 0.13940539972686206, 0.0635218379783509, 0.05758772441251217, 0.12721891248181044, 0.274679555099724, 0.062356616614351816, 0.036520972829581874, 0.2894446231429346, 0.17984207718791723, 0.1294057571238424, 0.007927298289601356, 0.13269359273855977, 0.09481480157788962, 0.07776351799927005, 0.09061481546462752, 0.06294942301063536, 0.08167591987905783, 0.17723124642655086, 0.09569448550899648, 0.07709594376087758, 0.0048780257272659335, 0.13657188315468066, 0.12450346187711393, 0.24552522735321547, 0.09823519296488714, 0.05005073954099398, 0.11013339571535172]
average_rank = 0.11324773897632523
######shixiong
minNumber= [1, 2, 8, 8, 5, 8, 2, 1, 11, 10, 6, 6, 1, 8, 1, 10, 10, 4, 14, 7, 5, 5, 3, 7, 6, 4, 13, 8, 6, 1, 10, 10, 7, 8, 4]
best_min= 1
rank= [0.13497634306911033, 0.24390411130658252, 0.1238996192680793, 0.2997261039505363, 0.16833484414784106, 0.07554517780620107, 0.11786930750544489, 0.04346313841701796, 0.07732071230467817, 0.14399740941340328, 0.04855568900782868, 0.1348411320436884, 0.20167045182559462, 0.10588412284098501, 0.12708728375712366, 0.14832901268061335, 0.28357600921534365, 0.11987419626292721, 0.023503308504656865, 0.11528196997215553, 0.0873767928061403, 0.20487489481157056, 0.1589650024121288, 0.23892529644996494, 0.0695097415947631, 0.19266379799356168, 0.07803690863886263, 0.13394039168209762, 0.030032373471377178, 0.16098101388941302, 0.20433154309936827, 0.17786624857236755, 0.3155897164494187, 0.06181499664203276, 0.15353048650393192]
average_rank = 0.14303083280905177

#featureCNN_k=10000_new.h5
rank = 0.1271875131993203
j_min= 0.06591201752761433
minNumber= [1, 12, 1, 9, 4, 8, 2, 12, 2, 2, 7, 6, 9, 4, 1, 3, 4, 11, 5, 11, 3, 5, 2, 8, 9, 14, 12, 8, 9, 7, 10, 7, 8, 1, 4]
best_min= 1
rank= [0.16279407460799425, 0.023800056300438063, 0.1514565093278529, 0.2280824496783247, 0.09626162758584839, 0.06032463920052823, 0.17425853664347918, 0.058350013941814605, 0.15196652898135446, 0.09563461850640072, 0.009312176876126569, 0.13753777140405943, 0.20091907581713647, 0.17792206245034717, 0.08110220562256262, 0.15346734637074197, 0.22853912359762296, 0.10844052535190066, 0.0026212444262941207, 0.05850317812557197, 0.10859805077852976, 0.14926208353775358, 0.0818112975231186, 0.08321934535703417, 0.06560954175329332, 0.10678188678780008, 0.1318094503703752, 0.13630570987912732, 0.004796799140829474, 0.15498240965375062, 0.2499025822473339, 0.10870475844597055, 0.172738985765131, 0.04484670256761452, 0.06591201752761433]
average_rank = 0.11504501103290499
##colour
rank = 0.20424598442832187
j_min= 0.18079630213257697
minNumber= [1, 2, 3, 10, 3, 5, 3, 9, 2, 1, 2, 1, 9, 12, 2, 5, 14, 11, 2, 6, 2, 1, 3, 2, 3, 3, 12, 1, 7, 7, 10, 9, 7, 7, 1]
best_min= 1
rank= [0.19308659278962836, 0.10915695217520216, 0.07430441508568487, 0.19771417555556278, 0.07925007283317251, 0.03652272232528974, 0.21516240443692106, 0.18170828925228968, 0.21079457179801253, 0.08801496302024275, 0.07470896514079817, 0.1965368482534909, 0.17955648358434756, 0.26606364048896236, 0.08864353183528181, 0.3758448016248206, 0.22676571811508664, 0.09100485951591121, 0.047322359329923146, 0.1624126678818164, 0.09474593948294405, 0.1388032399660798, 0.1268841108402355, 0.2257239577964379, 0.13903994025573982, 0.21595125205159613, 0.03448068594227714, 0.11127550816810387, 0.08501853886071885, 0.17024842589123684, 0.17341789562491947, 0.12054073561444063, 0.22463928476320405, 0.08712122989807448, 0.18079630213257697]
average_rank = 0.14923605949517232

##Resnet34
rank= [0.2229602039933529, 0.09536792598923256, 0.139415961176319, 0.20172605628427653, 0.12898704771563482, 0.027402943344199737, 0.2136498484168828, 0.15437215651425673, 0.16614866530677766, 0.1210558111436405, 0.0642881685229609, 0.14190036737673276, 0.15033106060989118, 0.1060847387941868, 0.09801219166000306, 0.09949262815581458, 0.25410929687003825, 0.14600943087528143, 0.043782991852501216, 0.16653892078021423, 0.1239886332526479, 0.0663813783553611, 0.09951694694675171, 0.05700988929871852, 0.009960230349513996, 0.11213741780114381, 0.04949159882085165, 0.14005689930303603, 0.01989079002295663, 0.13736945990669475, 0.1553777876016062, 0.14550883699114434, 0.1169252283859522, 0.022318028627310194, 0.12335463514951361]
average_rank = 0.11774069074844
##Resnet50
rank= [0.26353867190618996, 0.15583122840584435, 0.10300442455674835, 0.2753236265240478, 0.12514405271928628, 0.015727515893292996, 0.14766481819777533, 0.14577608438979772, 0.11123185307464437, 0.13380415475708055, 0.010157429258202235, 0.15307252735822305, 0.22480531122394065, 0.14481521516646761, 0.04946100354074558, 0.235603937910515, 0.2107895474243372, 0.17513061718924378, 0.04625214555913225, 0.13561498971748548, 0.1469077694203002, 0.11924217109497402, 0.03494405594573972, 0.0852162283078738, 0.05637204090276167, 0.08995812482007474, 0.01971673062990243, 0.07490816415150543, 0.005532109045283449, 0.044913760066437526, 0.14478896466238897, 0.23499885749838614, 0.2768899011284641, 0.07886945071074676, 0.15817909561546645]
average_rank = 0.12669104510780876